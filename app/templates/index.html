{% extends "base.html" %}

{% block title %}News Trends ‚Äì √úbersicht{% endblock %}

{% block content %}
  <main class="page-layout">

    <!-- Wortwolke + Wordcloud-Filter -->
    <section id="heroWordcloud">
      <div class="wordcloud-heading"></div>
      <div id="wordcloud"></div>
    </section>

    <section class="drawer-section">
      <h4>Filter f√ºr Wortwolke</h4>

      <label class="wc-filter">
        <span class="wc-filter__label">Anzahl Keywords:</span>
        <input id="wcCount" class="wc-filter__range" type="range"
               min="10" max="250" step="5" value="120">
        <span id="wcCountVal" class="wc-filter__value">120</span>
      </label>

      <label class="wc-filter">
        <span class="wc-filter__label">Mindest¬≠nennungen pro Keyword:</span>
        <input id="wcMin" class="wc-filter__range" type="range"
               min="1" max="50" step="1" value="7">
        <span id="wcMinVal" class="wc-filter__value">‚â• 7√ó</span>
      </label>

      <div class="biasFilters btn-row">
        <button type="button" data-bias="systemkritisch">Systemkritisch</button>
        <button type="button" data-bias="systemnah">Systemnah</button>
        <button type="button" data-bias="globalistisch">Globalistisch</button>
        <button type="button" data-bias="nationalistisch">Nationalistisch</button>
        <button type="button" id="biasClearBtn" data-role="bias-clear">Alle</button>
      </div>
    </section>

    <!-- Absolute Nennungen Top 25 -->
    <section id="keywordTopAbsoluteSection">
      <h2>Absolute Nennungen Top 25</h2>
      <h3>Im gew√§hlten Zeitraum ‚Äì Vergleich mit identischem Zeitraum davor</h3>
      <div id="keywordTopAbsoluteTableWrap"></div>
    </section>

    <!-- Dynamische Keyword-Trends -->
    <section id="keywordTrends" class="trend-section trends--minimal">
      <h2>üìà Dynamische Keyword-Trends</h2>
      <div class="trend-grid" id="trendGrid"></div>
    </section>

    <!-- Echokammern -->
    <section id="blindspotFeed" class="blindspot-feed">
      <h2>Echokammern</h2>

      <!-- Regler/Filter f√ºr Echokammern -->
      <div id="blindspotControls" class="blindspot-controls"
           style="display:flex;gap:18px;flex-wrap:wrap;align-items:center;margin:10px 0 18px 0">

        <label style="display:flex;align-items:center;gap:8px">
          Anzahl-Quellen:
          <span class="dual-lite">
            <input id="bsMinSourcesMin" type="range" min="1" max="50" step="1" value="2">
            <input id="bsMinSourcesMax" type="range" min="1" max="50" step="1" value="50">
          </span>
          <span id="bsMinSourcesVal">2 ‚Äì 10</span>
        </label>

        <label style="display:flex;align-items:center;gap:8px">
          Anzahl-Erw√§hnungen:
          <span class="dual-lite">
            <input id="bsMinTotalMin" type="range" min="1" max="50" step="1" value="10">
            <input id="bsMinTotalMax" type="range" min="1" max="50" step="1" value="50">
          </span>
          <span id="bsMinTotalVal">10 ‚Äì 20</span>
        </label>

        <label style="display:flex;align-items:center;gap:8px">
          Echokammer-Wert (in %):
          <span class="dual-lite">
            <input id="bsRatioMin" type="range" min="0" max="100" step="1" value="70">
            <input id="bsRatioMax" type="range" min="0" max="100" step="1" value="100">
          </span>
          <span id="bsRatioVal">1 % ‚Äì 5 %</span>
        </label>
      </div>

      <div id="blindspotInfo"
           style="margin-top:8px;font-size:0.9em;color:#444"></div>

      <div class="blindspot-grid">
        <div class="blindspot-col" id="feedKritisch">
          <h3>Systemkritisch</h3>
          <ul class="blindspot-list"></ul>
        </div>
        <div class="blindspot-col" id="feedNah">
          <h3>Systemnah</h3>
          <ul class="blindspot-list"></ul>
        </div>
        <div class="blindspot-col" id="feedNational">
          <h3>Nationalistisch</h3>
          <ul class="blindspot-list"></ul>
        </div>
        <div class="blindspot-col" id="feedGlobal">
          <h3>Globalistisch</h3>
          <ul class="blindspot-list"></ul>
        </div>
      </div>
    </section>

    <!-- Chronik: Top-Keywords je Kalenderwoche -->
    <section id="weeklyChronicle" class="chart-box">
      <h2>üóìÔ∏è Chronik: Top-Keywords je Kalenderwoche</h2>
      <div id="weeklyChronicleBody">
        <div class="empty-state">Wird geladen‚Ä¶</div>
      </div>
    </section>

    <!-- Gefilterte Artikel -->
    <section class="chart-box">
      <h2>Gefilterte Artikel</h2>
      <div id="filteredArticles"></div>
    </section>

  </main>
{% endblock %}
